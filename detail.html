<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Report Details</title>
    <link rel="stylesheet" href="style.css"> <!-- Reuse main styles -->
    <style>
        /* Detail page specific styles */
        .detail-header { margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid var(--border); }
        .detail-header h1 { margin-bottom: 5px; text-align: left; }
        .detail-header p { font-size: 1rem; color: #555; max-width: 800px; }
        .chart-container { background-color: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); margin-bottom: 30px; min-height: 400px; display: flex; flex-direction: column;}
        .chart-container h2 { margin-top: 0; margin-bottom: 15px; font-size: 1.2rem; color: var(--secondary); }
        #barChartContainer { max-width: 700px; margin: 0 auto; }
        #barChart { max-height: 400px; }
        .detail-text { margin-top: 30px; line-height: 1.7; }
        .back-link { display: inline-block; margin-bottom: 20px; color: var(--primary); text-decoration: none; font-weight: 500; }
        .back-link:hover { text-decoration: underline; }
        .chart-loading, .chart-error, .chart-info { text-align: center; padding: 50px; color: #7f8c8d; font-style: italic; }
        .chart-error { color: var(--danger); font-weight: bold; }
        .chart-container { background-color: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); margin-bottom: 30px; min-height: 400px; display: flex; flex-direction: column;}
        .chart-container h2 { margin-top: 0; margin-bottom: 15px; font-size: 1.2rem; color: var(--secondary); }

        #echartsTimeSeriesContainer, #barChartContainer { flex-grow: 1; min-height: 350px; }

        /* --- FIX: Give ECharts div explicit height --- */
        #echartsTimeSeries { width: 100%; height: 350px; }
        /* ------------------------------------------ */

        #barChartContainer { max-width: 700px; margin: 0 auto; }
        #barChart { max-height: 400px; }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Data & BI Reports Portal</h1>
        </div>
    </header>

    <main class="container">
        <a href="index.html" class="back-link">&laquo; Back to Portal</a>

        <div id="detailContent">
            <div class="detail-header">
                <h1 id="detailTitle">Loading...</h1>
                <p id="detailDescription"></p>
            </div>

            <!-- Container for ECharts -->
            <div class="chart-container">
                <h2>EFTSL Time Series</h2>
                <div id="echartsTimeSeriesContainer">
                     <div id="echartsTimeSeries" class="chart-loading">Loading Time Series Chart...</div>
                </div>
            </div>

            <!-- Container for Chart.js -->
            <div class="chart-container">
                <h2>Enrolment by School (Headcount)</h2>
                <div id="barChartContainer">
                     <canvas id="barChart" class="chart-loading">Loading Bar Chart...</canvas>
                </div>
            </div>

            <div class="detail-text">
                <h2>Details & Context</h2>
                <p id="detailsText">Loading details...</p>
            </div>
        </div>
         <div id="detailError" style="display: none; color: var(--danger); text-align: center; padding: 30px;">
             Could not load report details. Please ensure the report ID is correct and the data file exists.
         </div>

    </main>

    <!-- Chart Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <!-- Detail Page Logic -->
    <script src="detail.js" defer></script>
</body>
</html>